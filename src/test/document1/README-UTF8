В этом файле содержится описание теста производительности по работе с документами.

Для того, чтобы провести этот тест необходимо вначале правильно сконфигурировать
бизнес - схему для тестирования, т.е указать путь к .cfg файлу и настройки базы данных,
поле Рабочий каталог можно оставить пустым. 
После этого необходимо запустить Ананас.Дизайнер и обновить структуру базы данных. 
Если все обновилось без ошибок, запускаем Ананас, чтобы начать тестирование.
Выберете пункт Команды->Начать тестирование. Откроется форма документа,
в которой необходимо задать количество документов, которые будут созданы. 
Еще можно убрать флажок Проводить документы, тогда создаваемые документы не будут 
проводиться.
Все, после нажатия кнопки Старт запустится примерно вот такой вот скрипт:

function do_start() // запускается при нажатии кнопки старт
{
   var t = new ATime();
   t.start();
   var count_doc =Widget("spinBox1").value; // количесто документов, которые будут созданы
   var pg =  Widget("progressBar1");
   pg.totalSteps = count_doc; // настройка прогресс бара
   var i=0;
   var j;
   var cb = Widget("checkBox1").checked; // проводить документы или нет
   var doc = new Document("Тестовый документ"); 
   for ( i=0; i<count_doc;i++)
   {
        if(stop == true) break;
        doc.New(); // создаем новый документ
        doc.SetValue("Номер",i); // устанавливаем ему номер
        doc.SetValue("Дата", t.CurrentDate()+"T00:00:00"); // дату создания
        doc.SetValue("Основание","тестовое основание #"+String(i));
        for(j=0; j<10; j++)
        {
            doc.TableSelect("Таблица");
            doc.TableNewLine("Таблица"); // добавляем строку в таблицу
            doc.TableSetValue("Таблица","Наименование","поросячьи хвостики");
            doc.TableSetValue("Таблица","Количество",j+1);
            doc.TableSetValue("Таблица","Цена",1);
            doc.TableSetValue("Таблица","Сумма",j+1);
            doc.TableUpdate("Таблица");
            if(cb)
            {
	    	// создаем запись в регистре
                 Conduct("Главная книга",doc,"Таблица","41.2","60",100,j+1,j+1);
            }
       }
       doc.Update();
       if(cb)
       {
            doc.Conduct(); // проводим документ
       }
       pg.progress=i+1;
   }
   if(cb) ClosePeriod("Главная книга");
   var tm = t.elapsed()/1000; // расчитываем затраченное время
   SetValue("textLabel3",String(tm)+" сек.");
}


function Conduct(regname,doc, tablename, debet, credit, kolvo,sum)
{
    var summa =parseFloat(sum);
    var arName=regname; // имя накопительного регистра в метаданных
    var ar = new ARegister(arName); // создаем экземпляр объекта накопительного регистра
    if (ar.SetDocument(doc)) { print("Не прошла привязка документа");   return; }
    if(tablename!="")  ar.SetTable(tablename);
    if (ar.New()) {   print("Ошибка при добавлении в регистр " ); return; } // создаем новую запись в накопительном регистре
    if(regname == "Главная книга")
    { 
        ar.SetValue("Дебет",debet); 
        ar.SetValue("Кредит",credit);
        ar.SetValue("Количество",kolvo);
        ar.SetValue("Сумма",summa);
    }
    if (ar.Update()) { print("Ошибка обновления регистра"); return;} // запись значений в базу дянных
    //       print("document conducted");
    ar = 0;
}

function ClosePeriod(regname)
{
    var arName=regname; // имя накопительного регистра в метаданных
    var ar = new ARegister(arName); // создаем экземпляр объекта накопительного регистра
    ar.ClosePeriod(); // перерасчет остатков    
    ar = 0;
}

Кнопка Стоп не работает почему-то.
Список созданных документов можно посмотреть в журналах: общем и документов

Результаты тестирования на 2005-10-07
тестовая машина: Celeron 2.4G/512RAM/Intel...?
на пустой базе создание с проведением 100 документов за 
на базе с 1000 документами создание с проведением 100 документов за 

Grigory Panov <gr1313 at mail.ru>
